<?xml version="1.0" encoding="UTF-8"?>
<document>
    <properties>
        <author>Hippo</author>
        <title>Developing with Maven</title>
    </properties>
    <body>
    
        <section name="Prepare">
	        Hippo ECM is build using Maven 2 version >= 2.0.6 , follow the instructions found at
	        <a href="http://maven.apache.org/">here.</a>
        	<subsection name="WARNING (windows only)">
        		<p>
	        	    Due to <a href="http://forum.java.sun.com/thread.jspa?threadID=282485">this issue</a>
			        you need to take care that your local Maven 2 repository is not located in a folder with
			        spaces in the pathname.
		        </p> 
        		<p>
	        	    However, by default the maven installation procedure will locate the local maven repository in your 
	        	    home directory, on Windows this is a subdirectory of the "Documents and Settings" directory.
        	    </p>
        	    <p>
					So if you are using windows you need to relocate your local maven repository. This is done 
					like this: edit or create the file
					c:\Documents and Settings\Your Name\.m2\settings.xml and enter the following block of text:
				</p>
				<source>
					<![CDATA[
<settings xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <localRepository>C:\\mvnhome</localRepository>
</settings>
					]]>
				</source>
				<p>
					This effectively relocates your local maven repository to c:\mvnhome
				</p>				       	
        	</subsection>
        </section>
        
		<section name="Get the source">
			<p>
				The source can be found at <a href="https://svn.hippocms.org/repos/hippo/hippo-ecm">https://svn.hippocms.org/repos/hippo/hippo-ecm</a>
				and can be anonymously checked out using any <a href="http://subversion.tigris.org/">Subversion</a> client.
				Instructions on Subversion use can be found at <a href="http://svnbook.red-bean.com/">http://svnbook.red-bean.com/</a>.
				The following command checks out the trunk to a directory called 'hippo-ecm'
			</p>
	        <source>
~/workspaces/> svn co https://svn.hippocms.org/repos/hippo/hippo-ecm/trunk hippo-ecm
    	    </source>
		</section>
		
		<section name="Build">
	        <source>
~/workspaces/> cd hippo-ecm
~/workspaces/> mvn install
    	    </source>
    	    <p>
    	    	This will take a while and put all project artifacts (jars, wars) in your local maven repository
    	    </p>
		</section>
		
		<section name="Run">
			<p>
				First choose which application you want to run, all modules under
				the 'application' module are applications. 
			</p>
			<p>
				For running the 'default' application, execute the following commands:
			</p>
			<source>
~/workspaces/hippo-ecm> cd application/default/repository
~/workspaces/hippo-ecm/application/default/repository> mvn jetty:run-war
			</source>				
			<p>
				This will start a repository server. 
				Open a browser and go to http://localhost:8081/repository to view it's contents.
			</p>
			<p>
				In another console execute the following commands:
			</p>
			<source>
~/workspaces/hippo-ecm> cd application/default/frontend
~/workspaces/hippo-ecm/application/default/frontend> mvn jetty:run-war
			</source>				
			<p>
				This will start a frontend server.
				Open a browser and go to http://localhost:8082 to start the frontend application.
			</p>
		</section>	
    </body>
</document>
