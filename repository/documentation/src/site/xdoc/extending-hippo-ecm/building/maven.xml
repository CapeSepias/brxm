<?xml version="1.0" encoding="UTF-8"?>
<document>
    <properties>
        <author>Hippo</author>
        <title>Developing with Maven</title>
    </properties>
    <body>
    
        <section name="Install Maven">
        	Hippo ECM is built using Maven 2 version >= 2.0.6 , follow the Maven 
        	<a href="http://maven.apache.org/">installation instructions</a>
        	<subsection name="WARNING">
        		<p>
	        	    Due to <a href="http://forum.java.sun.com/thread.jspa?threadID=282485">this issue</a>
			        you need to take care that your local Maven 2 repository is not located in a folder with
			        spaces in the pathname.
		        </p> 
        		<p>
	        	    By default the maven installation procedure will locate the local maven repository in your 
	        	    home directory, on Windows this is a subdirectory of the "Documents and Settings" directory.
        	    </p>
        	    <p>
					So if you are using windows you need to relocate your local maven repository. This is done 
					like this: edit or create the file
					c:\Documents and Settings\Your Name\.m2\settings.xml and enter the following block of text:
				</p>
				<source>
					<![CDATA[
<settings xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
    <localRepository>C:\\mvnhome</localRepository>
</settings>
					]]>
				</source>
				<p>
					This effectively relocates your local maven repository to c:\mvnhome
				</p>				       	
        	</subsection>
        </section>
        
		<section name="Get the Hippo ECM source">
			<p>
				The source can be found at <a href="https://svn.hippocms.org/repos/hippo/hippo-ecm">https://svn.hippocms.org/repos/hippo/hippo-ecm</a>
				and can be anonymously checked out using any <a href="http://subversion.tigris.org/">Subversion</a> client.
				Instructions on Subversion use can be found at <a href="http://svnbook.red-bean.com/">http://svnbook.red-bean.com/</a>.
				The following command checks out the trunk to a directory called 'hippo-ecm'
			</p>
	        <source>
~/> svn co https://svn.hippocms.org/repos/hippo/hippo-ecm/trunk hippo-ecm
    	    </source>
		</section>
		
		<section name="Build">
			<p>
				Assuming that you have checked out the Hippo ECM source in the directory
				~/hippo-ecm
			</p>
	        <source>
~/> cd hippo-ecm
~/hippo-ecm> mvn install
    	    </source>
    	    <p>
    	    	This will take a while and put all project artifacts (jars, wars) in your local maven repository
    	    </p>
		</section>
		
		<section name="Run">
			<p>
				To run a out-of-the-box application, execute the following commands:
			</p>
			<source>
~/hippo-ecm> cd application/reviewed-action/repository
~/hippo-ecm/application/reviewed-action/repository> mvn jetty:run-war
			</source>
			<p>
				This will start a repository server. 
				Open a browser and go to http://localhost:8081/repository to view its contents.
			</p>
			<p>
				In another console execute the following commands:
			</p>
			<source>
~/hippo-ecm> cd application/reviewed-action/frontend
~/hippo-ecm/application/reviewed-action/frontend> mvn jetty:run-war
			</source>				
			<p>
				This will start the content browser.
				Open a web browser and go to <a href="http://localhost:8082">http://localhost:8082</a> 
				to navigate and edit your repository.
			</p>
		</section>	
    </body>
</document>
