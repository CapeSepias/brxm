<?xml version="1.0" encoding="UTF-8"?>
<document>
    <properties>
        <author email="a.schrijvers@hippo.nl">Ard Schrijvers</author>
        <title>Configuration</title>
    </properties>
    <head>
        <meta />
    </head>
    <body>
        <section name="Repository configuration">
            <p>
                Hippo Repository by default ships with a repository.xml. You only need
                to know about this configuration file if you need a different other than default PersistenceManager, AccessManager, LoginModule or SearchIndex.
                 
            </p>
            <p>
                The standard repository configuration for JackRabbit
                can be found at 
                <a href="http://jackrabbit.apache.org/doc/config.html">http://jackrabbit.apache.org/doc/config.html</a>.
                This page refers to this page for parts that are the same, and elaborates on those parts that are specific for Hippo Repository.
                </p>
                <p>
                The repository configuration file is an XML file that specifies 
                the components and configuration of a Jackrabbit content repository.
                
                <br/>
                it consists of
            
                <ul>
                    <li><a href="#FileSystem element">FileSystem element</a></li>
                    <li><a href="#Security element">Security element</a></li>
                    <li><a href="#Workspaces root directory element">Workspaces root directory element</a></li>
                    <li><a href="#Workspace element">Workspace element</a></li>
                    <li><a href="#Versioning element">Versioning element</a></li>
                    <li><a href="#SearchIndex element">SearchIndex element</a></li>
                </ul>
                The configuration file has the following overall outline:
                    <source>
                    &lt;Repository&gt;
                        &lt;FileSystem class=&quot;...&quot;&gt;...&lt;/FileSystem&gt;
                        &lt;Security&gt;
                        &lt;AccessManager class=&quot;...&quot;&gt;...&lt;/AccessManager&gt;
                        
                        [ &lt;LoginModule class=&quot;...&quot;&gt;...&lt;/LoginModule&gt; ]
                        &lt;/Security&gt;
                        &lt;Workspaces rootPath=&quot;...&quot; defaultWorkspace=&quot;...&quot;/&gt;
                        
                        &lt;Workspace name=&quot;...&quot;&gt;
                        &lt;FileSystem class=&quot;...&quot;&gt;...&lt;/FileSystem&gt;
                        &lt;PersistenceManager class=&quot;...&quot;&gt;...&lt;/PersistenceManager&gt;
                        [ &lt;SearchIndex class=&quot;...&quot;&gt;
                        
                        ...
                        [ &lt;FileSystem class=&quot;...&quot;&gt;...&lt;/FileSystem&gt; ]
                        &lt;/SearcIndex&gt; ]
                        &lt;/Workspace&gt;
                        &lt;Versioning rootPath=&quot;...&quot;&gt;
                        
                        &lt;FileSystem class=&quot;...&quot;&gt;...&lt;/FileSystem&gt;
                        &lt;PersistenceManager class=&quot;...&quot;&gt;...&lt;/PersistenceManager&gt;
                        &lt;/Versioning&gt;
                    &lt;/Repository&gt;
                        
                    </source>
            </p>
            <p>
                The XML attribute values in the configuration file are interpreted as plain strings 
                except for a few special variables, namely ${rep.home}, ${wsp.name} and ${wsp.home}.
                See <a href="http://jackrabbit.apache.org/doc/config.html">http://jackrabbit.apache.org/doc/config.html</a>
            </p> 
            <subsection name="FileSystem element">
                a FileSystem element (the virtual file system
                used by the repository to persist global state such as
                registered namespaces, custom node types, etc..) 
                <br/>
                See <a href="http://jackrabbit.apache.org/doc/config.html">http://jackrabbit.apache.org/doc/config.html</a> at Virtual file systems
            </subsection>
            <subsection name="Security element">
            a Security element that specifies the name of the app-entry
            in the JAAS config and the access manager. 
            Hippo Repository by default uses the following configuration:
                <source>
                    &lt;Security appName="Jackrabbit"&gt;
                        &lt;AccessManager
                            class="org.hippoecm.repository.security.SimpleAccessManager"&gt;
                        &lt;/AccessManager&gt;
                        &lt;LoginModule class="org.hippoecm.repository.security.RepositoryLoginModule"&gt;
                            &lt;param name="anonymousId" value="anonymous"/&gt;
                        &lt;/LoginModule&gt;
                    &lt;/Security&gt;
                </source>
                The SimpleAccessManager is the Hippo Repository default access manager implementation, and RepositoryLoginModule
                the default login implementation. See <a href="repository-based-authentication-and-users.html">repository-based-authentication-and-users.html</a> 
                for explanation about the RepositoryLoginModule. 
            </subsection>
            <subsection name="Workspaces root directory element">
            location of workspaces root directory and name of default workspace. 
                <source>
                    &lt;Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/&gt;
                </source>
            </subsection>
            <subsection name="Workspace element">
                The Workspace element is used as a template for separate workspace configuration files created for each new workspace. 
                Because of this the Workspace element is not interpreted directly from the repository 
                configuration file. Instead the workspace configuration template is first copied into the 
                workspace configuration file which is then interpreted to set up the configured workspace 
                components. Thus modifying the workspace configuration template in the repository configuration 
                file will not affect existing workspace configurations.
                <br/>
                See <a href="workspace.html">Workspace</a> for Hippo Repository configuration
            </subsection>
            <subsection name="SearchIndex element">
            Search index for content that is shared repository wide
            (/jcr:system tree, contains mainly versions). This configuration never needs adjustments, and looks like
                <source>
                    &lt;SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex"&gt;
                        &lt;param name="path" value="${rep.home}/repository/index"/&gt;
                    &lt;/SearchIndex&gt;
                </source>
            </subsection>
            <subsection name="Versioning element">
            a Versioning element that is used for configuring
            versioning-related settings. 
            </subsection>
        </section>
        
    </body>
</document>