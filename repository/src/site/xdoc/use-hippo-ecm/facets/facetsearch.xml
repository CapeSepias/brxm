<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC
  "-//Apache Software Foundation//DTD XDOC 1.0//EN"
  "http://maven.apache.org/dtd/xdoc_1_0.dtd">
<!--
  Copyright 2007 Hippo

  Licensed under the Apache License, Version 2.0 (the  "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS"
  BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document> 
  <properties>
    <title>Facet Search</title>
  </properties>
  <body>
     <section name="Faceted search / navigation">
      <p>
        Faceted navigation allows the assignment of multiple classifications to an object,
        enabling the classifications to be ordered in multiple ways, rather than a single,
        pre-determined order. This means objects can be navigated to along different
        paths, each based on different classifications or properties of those objects.
      </p>
      <p>
        Hippo Repository supports a faceted representation of physical
        nodes. These representations are again exposed as 'normal' JCR nodes (according jsr-170 specification), and
        can be used to represent all kinds of data in all kinds of different structures purely
        defined by their meta information. This results in virtual node trees
        providing a faceted navigation. See <a href="/hippo-ecm-trunk/target/site/integrate-hippo-ecm/example.html">here</a> for a ready to use demo project creating faceted navigation.
      </p>
       <subsection name="Faceted navigation explained">
         <p>
         Suppose, you have the following physical documents structure (like on filesystem)
         </p>
         <ul>
           <li>Pets
             <ul>
               <li>Dogs
               <ul>
                 <li>Dog1:
                   <br/>
                   - type:Dog<br/>
                   - size:Large<br/>
                   - age:Adult
                 </li>
                 <li>Dog2:
                   <br/>
                   - type:Dog<br/>
                   - size:Medium<br/>
                   - age:Young
                 </li>
               </ul>
               </li>
             </ul>
             <ul>
               <li>Rabbits<ul>
                 <li>Rabbit1:
                   <br/>
                   - type:Rabbit<br/>
                   - size:Large<br/>
                   - age:Young
                 </li>
                 <li>Rabbit2:
                   <br/>
                   - type:Rabbit<br/>
                   - size:Large<br/>
                   - age:Old
                 </li>
                 <li>Rabbit3:
                   <br/>
                   - type:Rabbit<br/>
                   - size:Small<br/>
                   - age:Young
                 </li>
               </ul>
               </li>
             </ul>
             <ul>
               <li>Horse<ul>
                 <li>Horse1:
                   <br/>
                   - type:Horse<br/>
                   - size:Small<br/>
                   - age:Young
                 </li>
                 <li>Horse2:
                   <br/>
                   - type:Horse<br/>
                   - size:Large<br/>
                   - age:Young
                 </li>
                 <li>Horse2:
                   <br/>
                   - type:Horse<br/>
                   - size:Large<br/>
                   - age:Old
                 </li>
               </ul>
               </li>
             </ul>
           </li>
         </ul>
         <p>So, for example, we have 2 Dogs, 3 Rabbits and 3 Horses. 2 small animals, 1 medium and 5 large ones. Some old and some young. Now, instead of 
         always browsing through the content like it is structured above, some people might want to have a navigation based on
           the type of animal, then on age, and then on size. These people would have a navigation like <code>navigation1</code></p>
         
         <ul>
           <li>Navigation 1
             <ul>
               <li>Dogs (2)
                 <ul>
                   <li>Adult (1)
                     <ul>
                       <li>Large (1)</li>
                     </ul>
                   </li>
                   <li>Young (1)<ul>
                     <li>Medium (1)</li>
                   </ul>
                   </li>
                 </ul>
               </li>
               <li>Rabbits (3)
                 <ul><li>...etc...</li></ul>
               </li>
               <li>Horses (3)
                 <ul><li>...etc...</li></ul>
               </li>
             </ul>
             </li>
         </ul>
         <p>But obviously, somebosy else, might want to navigate on size and then on type. He is not interested in age at all.
           His navigation would look like <code>navigation2</code>:
         </p>
         <ul>
           <li>Navigation 2
             <ul>
               <li> Large (5)
                 <ul>
                   <li>
                     Dogs (1)
                   </li>
                   <li>
                     Rabbit (2)
                   </li>
                   <li>
                     Horse (2)
                   </li>
                 </ul>
               </li>
               <li> Medium (1)
                 <ul><li>...etc..</li></ul>
               </li>
               <li>
                 Small (2)
                 <ul><li>...etc..</li></ul>
               </li>
             </ul>
           </li>
         </ul>
         <p>
           Ofcourse, one and the same person can have many multiple facet navigations, for example,  
         </p>
         <ul>
           <li> ByTypeAgeSize
             <ul><li>navigation 1<ul><li>...</li></ul></li></ul>
           </li>
           <li> BySizeType
             <ul><li>navigation 2<ul><li>...</li></ul></li></ul>
           </li>
         </ul>
       </subsection>
       
      
      <subsection name="How to create a facet search: example">
        <p>
          First of all, you need to define your facets. They are defined by nodes of type <code>hippo:facetsearch</code>.  These nodes will
          form the root of the virtual folder structure. They have the following JCR properties:
        </p>
        <ul>
          <li>
            <b>hippo:queryname</b>
            <br/>
            The name of the query. You can choose any name you like.
          </li>
          <li>
            <b>hippo:docbase</b>
            <br/>
            The absolute path (start with /) of the physical folder whose contents will be used to generate the
            virtual folder. You might choose to have faceted navigation on a subset of the hierarchical physical tree
          </li>
          <li>
            <b>hippo:facets</b>
            <br/>
            This multivalued property contains the names of the properties that will
            comprise the virtual folder structure.
          </li>
        </ul>
      </subsection>

      <!--
      <subsection name="Example">

      </subsection>
      -->

      <subsection name="Screencast">
        <p>
          A screenshot showing off the faceted navigation features can be found on Arj&#233; Cahn's blog
          posting 11/09/2007 with embedded screencast:<br />
          <a href="http://blogs.hippo.nl/arje/2007/09/status_update_defining_facets.html">
            <img src="../../images/facets-screenshot.jpg" width="421" height="410" alt="Facets screenshot" />
          </a>
        </p>
      </subsection>

    </section>
  </body>
</document>