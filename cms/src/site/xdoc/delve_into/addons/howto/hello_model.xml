<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC
  "-//Apache Software Foundation//DTD XDOC 1.0//EN"
  "http://maven.apache.org/dtd/xdoc_1_0.dtd">
<!--
  Copyright 2007 Hippo

  Licensed under the Apache License, Version 2.0 (the  "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS"
  BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document>
  <properties>
      <title>Example: Hello World plugin</title>
  </properties>
  <body>

    <section name="Making the Hello World plugin context sensitive">
      <p>
        Now let's make our plugin a little bit less static. We can make the label show
        the name of the node that is selected in the tree. To do this, we use a Wicket
        PropertyModel.
      </p>

      <p>
        First, import the PropertyModel class:
      </p>

      <source>import org.apache.wicket.model.PropertyModel;</source>

      <p>
        Then change the constructor so it looks like this:
      </p>

<source>
<![CDATA[    public HelloWorldPlugin(IPluginContext context, IPluginConfig config) {
        super(context, config);

        add(new Label("label", new PropertyModel(this, "model.node.name")));
    }]]>
</source>

      <p>
        To let the plugin update its model and view once a different node has
        been selected in the tree, we need to override the onModelChanged()
        method of Plugin:
      </p>

<source>
<![CDATA[    @Override
    public void onModelChanged() {
        redraw();
    }]]>
</source>

      <p>
        Now rebuild your plugin project as described above, and restart the
        frontend application.  Follow the same procedure as before to test your
        plugin.  The Hello World plugin should now display the name of the node
        selected in the tree.
      </p>

    </section>

  </body>
</document>
