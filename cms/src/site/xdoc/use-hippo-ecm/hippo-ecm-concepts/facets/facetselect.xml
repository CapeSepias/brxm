<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC
  "-//Apache Software Foundation//DTD XDOC 1.0//EN"
  "http://maven.apache.org/dtd/xdoc_1_0.dtd">
<!--
  Copyright 2007 Hippo

  Licensed under the Apache License, Version 2.0 (the  "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS"
  BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document>
  <properties>
    <title>Facet Select</title>
  </properties>
  <body>
    <section name="Faceted selection">
      <p>
        <i><b>Note:</b> Faceted selection and faceted reference are used intertwined and refer to the exact same thing.</i>
      </p>
      <p>
        The easiest way to understand <code>faceted selection</code> is to see it as a mirror of some folder, possibly with some filter applied.
        The filter is based on facets (metadata) of documents (nodes). An example would be, that you only want to
        show documents which are english and published. By creating some faceted selections, you can
        very easily create websites which are multilingual, and have a "preview" and "live" sites (or any other state in between).
        Exposing your DMS with faceted selection and authorization (and even facet search combined!) gives you a lot of
        flexibility in exposing your (unstructured) physical content in many different (virtual) structured ways.
      </p>
      <p><b>Recapitulating:</b> Faceted selection is like a mirror of the folder you point to. If you leave the selection empty and only select a folder, it
        acts like an exact mirror (similar to a linux mount except for possible authorization). If you apply a selection, it is a
        filtered mirror of the folder you pointed to to be mirrored.
        Authorization acts as a default filter dependent on the user. </p>
      <subsection name="Faceted selection explained: visual">
        <p>
          Suppose we have the same hierachical repository data as in the
          <a href="facetsearch.html#Faceted navigation explained: visual">facet search example</a>:
        </p>
        <source>
Folder                       Type      Size      Age
------------------------------------------------------------------------
Pets
|-- Dogs
|   |-- dog1                 Dog       Large     Adult
|   |-- dog2                 Dog       Medium    Adult
|   |-- dog3                 Dog       Small     Young
|   `-- dog4                 Dog       Large     Adult
|-- Rabbits
|   |-- rabbit1              Rabbit    Large     Young
|   |-- rabbit2              Rabbit    Large      Old
|   |-- rabbit3              Rabbit    Small     Young
`-- Horses
    |-- horse1               Horse     Small     Young
    |-- horse2               Horse     Large     Young
    `-- horse3               Horse     Large     Old
        </source>
        <p>
           Now, suppose, you want to browse through the data, but with a filter applied to only show <i>large animals</i>. This is
           realized by simply creating a facet select node that indicates to only show animals which are of size 'large'. Suppose
           that the facet select node is called 'IsLarge', then the navigation would look like:
        </p>
          <source>
Folder                       Type      Size      Age
------------------------------------------------------------------------
IsLarge
`-- Pets
    |-- Dogs
    |   |-- dog1             Dog       Large     Adult
    |   `-- dog4             Dog       Large     Adult
    |-- Rabbits
    |   |-- rabbit1          Rabbit    Large     Young
    |   |-- rabbit2          Rabbit    Large      Old
    |-- Horses
    |-- horse2               Horse     Large     Young
    `-- horse3               Horse     Large     Old
          </source>
      <p>
        You might also have a facet select node which filters such that I get 'large' and 'young' only.
        Then, the navigation would be:
      </p>
        <source>
Folder                       Type      Size      Age
------------------------------------------------------------------------
IsLargeAndYoung
`-- Pets
    |-- Rabbits
    |   `-- rabbit1          Rabbit    Large     Young
    `-- Horses
        `-- horse2           Horse     Large     Young
        </source>

      <p>
        You can have as many facet select nodes as you want.
        You do not need to have the facet select starting filtering on the root node. You can also make a facet select node, that
        filters for only 'large' animals, and has starting point <code>/Pets/Dogs</code>. This would result in a navigation like:
      </p>
      <source>
Folder                       Type      Size      Age
------------------------------------------------------------------------
IsLarge
|-- dog1                     Dog       Large     Adult
`-- dog4                     Dog       Large     Adult
       </source>
        <p>
          A facet select can have different modes.  Normally you use the mode
          &quot;select&quot; which filters out any documents which contain the facet,
          but the right one.  There is also a mode &quot;prefer&quot; which does not
          filter the documents, but reorders them such that the matching document is the
          first document in the list.  This way you can build a site which normally
          displays localized documents, but falls back to the english version of the
          document if no translation is available.  A &quot;prefer-single&quot; will
          return only the first (i.e. best matching) document.
        </p>
        <p>
          You can even have a facet select, which filters a hierarchical tree which contains in turn another facet select. So, you can have facet selects in facet selects.
          Instead of a facetselect in a facetselect, you can have a <a href="facetsearch.html">facetsearch</a> node <b>inside</b> the result of a facetselect node!
          From this facetsearch node on, faceted navigation will be displayed.
        </p>
        <p>
          By understanding the possibilities, you can model endless combinations of structured data resulting from unstructered data. Obviously, under water all documents
          are being checked wether the user is authorized to see the document.
        </p>
        <p>
          Take a look at advanced content modelling to learn about possibilities and use cases. Note
          that you might want to look at it twice because it is not trivial. In the end, understanding
          modelling of data on unstructured data will give you an enormeous freedom and enables you developing
          complex frontend websites or expose a DMS without writing code.
        </p>
      </subsection>
<!--
    TODO:
    faceted select
    - no filter
    - different tree structuur (not editable)
    - getCanonincalNode (editable)

    no facet search on search: should not be done.
-->
    </section>
  </body>
</document>
