<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC
  "-//Apache Software Foundation//DTD XDOC 1.0//EN"
  "http://maven.apache.org/dtd/xdoc_1_0.dtd">
<!--
  Copyright 2007 Hippo

  Licensed under the Apache License, Version 2.0 (the  "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS"
  BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document>
  <properties>
    <title>Installing plugins from the forge</title>
  </properties>
  <body>

    <section name="Installing plugins from the Hippo forge">
      <p>
        The Hippo Forge, <a href="http://forge.hippo-ecm.org/">http://forge.hippo-ecm.org/</a>,
        is a repository filled with all kinds of useful frontend and repository
        plugins.  In this article, we'll see how we can use the forge to
        enhance the basic Hippo CMS with additional functionality.
      </p>

      <subsection name="Download the Plugin">
        <p>
          We'll use the popular <a
          href="http://forge.hippo-ecm.org/projects/feedbackplugin/">feedbackplugin</a>
          for the demonstration.  Download the latest version of the plugin,
          hippo-forge-feedbackplugin-1.01.00.jar at the time of this writing.
        </p>
      </subsection>

      <subsection name="Extending the EAR">
        <p>
          To install the plugin, unzip the EAR package (see <a
          href="deploying-the-wars.html">Deploying the WARs</a> on how to
          obtain it)
          <source>
~/> mkdir hippo-ear
~/> cd hippo-ear
~/hippo-ear/> unzip ../hippo-ecm-package-ear-2.01.00-SNAPSHOT.ear
~/hippo-ear/> ls
commons-collections-3.1.jar
commons-lang-2.1.jar
hippo-ecm-addon-builtin-common-2.01.00-SNAPSHOT.jar
 [ ... ]
xml-apis-1.3.03.jar
~/hippo-ear/> 
          </source>
          Add the JAR to the folder where you unzipped the EAR and rezip it.
          <source>
~/hippo-ear/> cp ~/Downloads/hippo-forge-feedbackplugin-1.01.01.jar ./
~/hippo-ear/> zip -r ../hippo-ecm-plus-feedback.ear .
          </source>
        </p>
        <p>
          You now have an EAR package with the plugin.  Deploy it in your
          Application Server.
        </p>
      </subsection>

      <subsection name="Extending the WAR">
        <p>
          As in the case of the EAR, unzip the WAR package (see <a
          href="deploying-the-wars.html">Deploying the WARs</a> again on how to
          obtain the package)
          <source>
~/> mkdir hippo-war
~/> cd hippo-war
~/hippo-war/> unzip ../hippo-ecm-package-war-2.01.00-SNAPSHOT.ear
~/hippo-war/> ls
index.html
META-INF/
skin/
WEB-INF/
xinha/
~/hippo-war/> ls WEB-INF/lib
commons-collections-3.1.jar
 [ ... ]
xml-apis-1.3.03.jar
~/hippo-war/> 
          </source>
          Add the JAR to the WEB-INF/lib folder and rezip the WAR.
          <source>
~/hippo-war/> cp ~/Downloads/hippo-forge-feedbackplugin-1.01.01.jar WEB-INF/lib/
~/hippo-war/> zip -r ../hippo-ecm-plus-feedback.war .
          </source>
        </p>
        <p>
          You now have an WAR package with the plugin.  Deploy it in your
          servlet container.
        </p>
      </subsection>

      <subsection name="Deploy the Bundle (planned)">
        <p>
          A future OSGi packaging of Hippo ECM will allow you to deploy the
          plugin to a (running) OSGi container.
        </p>
      </subsection>

      <subsection name="Customizing the CMS configuration">
        <p>
          Open the console with administrative privileges, i.e. log in to <a
          href="http://localhost:8080/console">http://localhost:8080/console</a>
          as <em>admin</em> (default password <em>admin</em>).  Navigate to the
          <code>/hippo:configuration/hippo:frontend/cms/logoutPlugin</code> node.
        </p>
        <img src="../images/console-cms-logout.png"
          alt="/hippo:configuration/hippo:frontend/cms/logoutPlugin" />
        <p>
          Change the class name in the "plugin.class" property to
          <code>org.hippoecm.forge.feedbackplugin.FeedbackPlugin</code> and
          save the node (click "Save" with the logoutPlugin node selected).
        </p>
      </subsection>

      <subsection name="Sending feedback">
        <p>
          Open Hippo CMS <a
            href="http://localhost:8080/console">http://localhost:8080/</a>.
          After logging in, the result should look similar to this:
        </p>
        <img src="../images/cms-plus-feedback.png" alt="cms plus feedback" />
      </subsection>

    </section>

  </body>
</document>
