<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 2012-2014 Hippo B.V. (http://www.onehippo.com)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  -->
<!DOCTYPE document PUBLIC
  "-//Apache Software Foundation//DTD XDOC 1.0//EN"
  "http://maven.apache.org/dtd/xdoc_1_0.dtd">
<document>
  <properties>
    <title>Setup in the Template Composer</title>
  </properties>
  <body>
    <section name="Setup in the Template Composer">
      <p>
        If you want to enable your webmaster to drag'n'drop poll components into one or more containers on your pages
        (rather than determining the page layout in advance by <a href="instantiation.html">instantiating</a> poll
        components), this is how to setup the poll component in the Template Composer.
      </p>

      <subsection name="Create the container(s)">
        <p>
          In order to be able to drop poll components into pages, the pages need to have a <i>container</i>. See
          <a href="http://www.onehippo.org/7_7/library/concepts/template-composer/template-composer-configuration.html">here</a>
          for information on setting up containers. For starters, there is a container already setup for you on the
          homepage of the archetype project.
        </p>
      </subsection>

      <subsection name="Prepare the component">
        <p>
          The default poll component (class) provided by the poll plug-in is droppable out of the box since version 1.05.06.
          If you use your own poll component class, you have to add it to the CMS' catalog of droppable components. You do this on the
          CMS Console: Navigate to <code>/hst:hst/hst:configuration/[your project]/hst:catalog/[your project]-catalog</code> and add
          a <code>hst:containeritemcomponent</code> with the name you want the droppable component to have in the CMS Channel
          Manager. Add the default attributes that should be copied when the dropped component gets instantiated.
        </p>
        <p>
          The screenshot below shows the attributes of the droppable poll component provided by the plug-in. If you use
          your own custom component class, the <code>hst:componentclassname</code> should point to it. If you use your own
          custom rendering code, the <code>hst:template</code> should point to your own template. The <code>hst:xtype</code>
          attribute must be present and set to <code>HST.Item</code>.
        </p>
        <img src="images/catalog.jpg" alt="Catalog"/>
        <p>
          For more info on this, see
          <a href="http://www.onehippo.org/7_7/library/concepts/template-composer/template-composer-catalog-item.html">here</a>.
        </p>
      </subsection>

      <subsection name="Drag'n'Drop it!">
        <p>
          Now that you have a droppable poll component and one or more containers to drop the component into, you can
          drag'n'drop by navigating in the CMS Channel Manager to the desired page. Entering editing mode
          (click on <i>Edit Template</i>) and display the droppable components (click <i>Add Components</i>). Your
          droppable poll component should show up, and the container for dropping should be highlighted on the page.
        </p>
        <img src="images/drag-n-drop.jpg" alt="Drag'n'Drop"/>
        <p>
          After you dropped the poll component into the container, click on the container again to display the
          component's parameter configuration pop-up window. Adjust the parameters as necessary (you should provide
          at least a sensible poll documents path) and click <i>save</i> to store the settings and dismiss the
          pop-up. Click <i>Save &amp; Close</i> and <i>Publish</i> to make your changes to the page permanent.
          The poll component's parameters are described <a href="parameters.html">here</a>.
        </p>
        <img src="images/parameter-popup.png" alt="Parameter Pop-up"/>
      </subsection>
    </section>
  </body>
</document>
