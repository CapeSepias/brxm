<?xml version="1.0" encoding="UTF-8"?>

<instructions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://www.onehippo.org/essentials/instructions/instructions.xsd" xmlns="http://www.onehippo.org/essentials/instructions">

  <instructionSet>
    <!-- load cnd -->
    <cnd documentType="customPollDocument" superType="{{namespace}}:basedocument,hippostd:relaxed,hippotranslation:translated"/>
    <!-- java classes -->
    <file action="copy" source="java/CustomPollDocument.txt" target="{{beansFolder}}/CustomPollDocument.java"/>
    <file action="copy" source="java/CustomPollDocumentComponent.txt" target="{{componentsFolder}}/CustomPollDocumentComponent.java"/>
    <file action="copy" source="java/CustomPollDocumentComponentInfo.txt" target="{{componentsFolder}}/CustomPollDocumentComponentInfo.java"/>
  </instructionSet>

  <!-- group "freemarker" is used when that option is chosen in the general settings -->
  <instructionSet group="freemarker">
    <freemarker action="copy" source="freemarker/custompoll.component.ftl" target="{{freemarkerRoot}}/{{namespace}}/custompoll.component.ftl"/>
    <xml action="copy" source="freemarker/custompoll-template.xml" target="/hst:hst/hst:configurations/{{namespace}}/hst:templates"/>
  </instructionSet>

  <!-- group "jsp" is used when that option is chosen in the general settings -->
  <instructionSet group="jsp">
    <!-- TODO: create custompol.component.jsp also. Do the same for the jsp: -->
    <!-- (this file was created from contents of the standard template at
     /hst:hst/hst:configurations/hst:default/hst:templates/poll.component.ftl plus some extra code to show the custom title) -->
    <!--<file action="copy" source="jsp/example.jsp" target="{{jspRoot}}/example.jsp"/>-->
    <!--<xml action="copy" source="hst/example-template-jsp.xml" target="/hst:hst/hst:configurations/hst:default/hst:templates"/>-->
  </instructionSet>

  <!-- sample data -->
  <instructionSet group="sampleData">
    <!--<folder path="/content/documents/{{namespace}}/polls" template="xml/poll-folder.xml"/>-->
    <xml action="copy" source="xml/content-custom-example-poll.xml" target="/content/documents/{{namespace}}/polls"/>
    <xml action="copy" source="xml/custompoll-catalogitem.xml" target="/hst:hst/hst:configurations/{{namespace}}/hst:catalog/{{namespace}}-catalog"/>
    <xml action="copy" source="xml/custompoll-page.xml" target="/hst:hst/hst:configurations/{{namespace}}/hst:pages"/>
    <xml action="copy" source="xml/custompoll-sitemapitem.xml" target="/hst:hst/hst:configurations/{{namespace}}/hst:sitemap"/>
    <xml action="copy" source="xml/custompoll-workspace-container.xml" target="/hst:hst/hst:configurations/{{namespace}}/hst:workspace/hst:containers"/>
    <xml action="copy" source="xml/menu-item.xml" target="/hst:hst/hst:configurations/{{namespace}}/hst:workspace/hst:sitemenus/main"/>
    <xml action="copy" source="xml/namespaceCustomDocument.xml" target="/hippo:namespaces/{{namespace}}"/>
    <xml action="copy" source="xml/polldata-polldemo.xml" target="/"/>
  </instructionSet>

</instructions>