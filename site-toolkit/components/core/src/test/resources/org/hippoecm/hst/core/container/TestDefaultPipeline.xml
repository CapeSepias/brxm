<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

  <import resource="classpath:/org/hippoecm/hst/site/container/SpringComponentManager-base.xml" />
  <import resource="classpath:/org/hippoecm/hst/site/container/SpringComponentManager-container.xml" />
  <import resource="classpath:/org/hippoecm/hst/site/container/SpringComponentManager-pipelines.xml" />
  <import resource="classpath:/org/hippoecm/hst/site/container/SpringComponentManager-request.xml" />
  <import resource="classpath:/org/hippoecm/hst/core/jcr/pool/GeneralMultiplePoolingRepository.xml" />

  <bean id="org.hippoecm.hst.configuration.HstSites" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetClass" value="org.hippoecm.hst.configuration.HstSitesFactory" />
    <property name="targetMethod" value="create" />
    <property name="arguments">
      <list>
        <ref bean="javax.jcr.Repository" />
        <value>testpreview</value>
      </list>
    </property>
  </bean>
  
  <bean id="org.hippoecm.hst.configuration.HstSites.live" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetClass" value="org.hippoecm.hst.configuration.HstSitesFactory" />
    <property name="targetMethod" value="create" />
    <property name="arguments">
      <list>
        <ref bean="javax.jcr.Repository" />
        <value>testlive</value>
      </list>
    </property>
  </bean>
  
  <bean id="org.hippoecm.hst.core.domain.DomainMappings" class="org.hippoecm.hst.core.domain.DomainMappingsImpl">
    <constructor-arg>
      <list>
        <bean class="org.hippoecm.hst.core.domain.DomainMappingImpl">
          <constructor-arg value="preview.myproject.hippoecm.org" />
          <constructor-arg value="testproject" />
        </bean>
      </list>
    </constructor-arg>
  </bean>
  
  <bean id="org.hippoecm.hst.configuration.sitemap.HstSiteMapMatcher" 
        class="org.hippoecm.hst.configuration.BasicHstSiteMapMatcher">
  </bean>
  
  <bean id="javax.servlet.ServletContext"
        class="org.hippoecm.hst.test.mock.HstMockServletContext">
    <property name="requestDispatchers">
      <list>
        <map>
          <entry key="/.*\.jsp">
            <bean class="org.hippoecm.hst.test.mock.HstMockRequestDispatcher">
              <constructor-arg value="/*.jsp" />
              <constructor-arg>
                <bean class="org.hippoecm.hst.test.mock.MockJspServlet" />
              </constructor-arg>
            </bean>
          </entry>
        </map>
      </list>
    </property>
  </bean>
  
  <bean id="javax.servlet.ServletConfig"
        class="org.springframework.mock.web.MockServletConfig">
    <constructor-arg ref="javax.servlet.ServletContext" />
  </bean>
  
  <bean id="javax.servlet.http.HttpServletRequest" scope="prototype"
        class="org.springframework.mock.web.MockHttpServletRequest">
     <constructor-arg ref="javax.servlet.ServletContext" />
     <property name="protocol" value="http" />
     <property name="serverName" value="preview.myproject.hippoecm.org" />
     <property name="serverPort" value="8080" />
     <property name="method" value="GET" />
     <property name="contextPath" value="/site" />
     <property name="servletPath" value="/content" />
     <property name="pathInfo" value="/news/2008/08" />
  </bean>
  
  <bean id="javax.servlet.http.HttpServletResponse" scope="prototype"
        class="org.springframework.mock.web.MockHttpServletResponse">
  </bean>
  
</beans>