<!--
  Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  -->

<div class="panel panel-default" ng-controller="galleryPluginCtrl">
    <div class="panel-heading">
        <h3>Gallery manager Local</h3>
    </div>
    <div class="panel-body">
        <div ng-show="showBeanrewriterMessage" class="alert alert-info">
            <p>You have changed image sets and may want to update your HST image set beans now.
                You can use the <a href="/essentials/#/tools/beanwriter">BeanWriter tool</a> for this.</p>
        </div>
        <div><h4>Create Custom Image Set</h4>

            <form novalidate name="newImageSetForm" class="form-horizontal">
                <essentials-help help-reference="help.imageSet" show-hide-variable="myHelp"></essentials-help>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Image set name</label>
                    <div class="col-sm-4">
                        <input class="form-control" ng-model="imageSetName" ng-pattern="/^[a-z]{2,}$/" ng-required="true" placeholder="Enter image set name"/>
                    </div>
                    <div class="col-sm-4">
                        <input type="checkbox" ng-model="updateExisting"/> Update existing image sets and regenerate HST beans
                    </div>
                </div>
                <div class="form-group col-sm-12">
                    <button ng-disabled="!newImageSetForm.$valid" class="btn btn-success pull-right" ng-click="addImageSet()">Create new image set</button>
                </div>
            </form>
        </div>

        <div class="clearfix"></div>
        <div ng-show="imageSets.length">
            <h4>Edit Image Set</h4>

            <form novalidate name="imageSetFrom" class="form-horizontal">
                <div class="form-group">
                    <label class="col-sm-4 control-label">Select image set</label>
                    <div class="col-sm-4">
                        <select chosen
                                class="form-control"
                                ng-model="selectedImageSet"
                                no-results-text="'No results found for'"
                                ng-options="option.name for option in imageSets"
                                data-placeholder="Select existing image set"
                                width="'100%'">
                        </select>
                    </div>
                    <div class="col-sm-4"></div>
                </div>
                <div ng-show="selectedImageSet">
                    <div class="form-group col-sm-12">
                        <h5>Add Image Variant</h5>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">Variant name</label>
                        <div class="col-sm-4">
                            <input class="form-control" ng-model="imageVariantName" ng-pattern="/^[a-z]{2,}$/" ng-required="true" placeholder="Enter variant name"/>
                        </div>
                        <div class="col-sm-4">
                            <button ng-disabled="!imageVariantName" class="btn btn-success pull-right" type="button" ng-click="addImageVariant()">Add new image variant</button>
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <h5>Edit Image Variant</h5>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">Select image variant</label>
                        <div class="col-sm-4">
                            <select name="selectedImageModel"
                                    class="form-control"
                                    ng-model="selectedImageModel"
                                    ng-options="option.name for option in selectedImageSet.models"
                                    placeholder="Select existing variant"
                                    ng-change="disableSelection()"
                                    ng-disabled="selectionDisabled"
                                    width="'100%'">
                            </select>
                        </div>
                        <div class="col-sm-4">
                            <button ng-show="selectedImageModel && !selectedImageModel.readOnly"
                                    class="btn btn-warning pull-right"
                                    type="button"
                                    ng-click="removeImageVariant(selectedImageModel)">
                                Delete variant
                            </button>
                            <button ng-show="selectedImageModel"
                                    class="btn btn-default pull-right"
                                    type="button"
                                    ng-click="resetVariant()"
                                    >
                                Discard Changes
                            </button>
                            <button ng-show="selectedImageModel"
                                    class="btn btn-primary pull-right"
                                    type="button"
                                    ng-click="saveVariant()"
                                    >
                                Save Changes
                            </button>
                        </div>
                    </div>

                    <div ng-show="selectedImageModel">
                        <div class="form-group" ng-hide="selectedImageModel.readOnly">
                            <div class="form-group">
                                <h4 class="col-sm-4 control-label">Variant Parameters</h4>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Width</label>
                                <div class="col-sm-6">
                                    <input class="form-control" ng-model="selectedImageModel.width" ng-pattern="/^[0-9]{1,}$/" ng-required="true"/>
                                </div>
                                <div class="col-sm-2"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Height</label>
                                <div class="col-sm-6">
                                    <input class="form-control" ng-model="selectedImageModel.height" ng-pattern="/^[0-9]{1,}$/" ng-required="true"/>
                                </div>
                                <div class="col-sm-2"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Upscale:</label>
                                <div class="col-sm-6">
                                    <select class="chosen-select" chosen
                                            ng-model="selectedImageModel.upscaling"
                                            ng-options="v.value as v.description for v in upscalingValues"
                                            width="'100%'">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="col-sm-2"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">Speed vs Quality</label>
                                <div class="col-sm-6">
                                    <select class="chosen-select" chosen
                                            ng-model="selectedImageModel.optimize"
                                            ng-options="o.value as o.description for o in optimizeValues"
                                            width="'100%'">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="col-sm-2"></div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-4 control-label">JPEG Quality</label>
                                <div class="col-sm-6">
                                    <select class="chosen-select" chosen
                                            ng-model="selectedImageModel.compression"
                                            ng-options="c.value as c.description for c in compressionValues"
                                            width="'100%'">
                                        <option value=""></option>
                                    </select>
                                </div>
                                <div class="col-sm-2"></div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="form-group">
                                <h4 class="col-sm-4 control-label">Translations</h4>
                                <div class="col-sm-8"></div>
                            </div>
                            <div class="form-group col-sm-12" ng-repeat="translation in selectedImageModel.translations">
                                <label class="col-sm-2 control-label"></label>
                                <div class="col-sm-2">
                                    <input class="form-control" ng-model="translation.language" ng-pattern="/^[a-z]{2,}$/" ng-required="true"/>
                                </div>
                                <div class="col-sm-6">
                                    <input class="form-control" ng-model="translation.message" ng-required="true"/>
                                </div>
                                <div class="col-sm-2">
                                    <button data-dismiss="alert" class="close" type="button" ng-click="removeTranslation(translation)">×</button>
                                </div>
                            </div>
                            <div class="form-group col-sm-12">
                                <button class="btn btn-success pull-right" type="button" ng-click="addTranslation()">Add new translation</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
