definitions:
  config:
    /hippo:configuration/hippo:update/hippo:queue/AddImagelinkEditorTemplateNodetypesProperty:
      jcr:primaryType: hipposys:updaterinfo
      hipposys:batchsize: 10
      hipposys:description: ''
      hipposys:dryrun: false
      hipposys:parameters: ''
      hipposys:query: //hippo:namespaces/hippogallerypicker/imagelink/editor:templates/_default_
      hipposys:script: "package org.hippoecm.frontend.plugins.cms.admin.updater\r\n\
        \r\nimport org.onehippo.repository.update.BaseNodeUpdateVisitor\r\nimport\
        \ javax.jcr.Node\r\n\r\nclass UpdaterTemplate extends BaseNodeUpdateVisitor\
        \ {\r\n\r\n  boolean doUpdate(Node node) {\r\n    log.debug \"visiting node\
        \ ${node.path}\"\r\n    if (node.hasProperty(\"nodetypes\")) {\r\n      if\
        \ (!node.getProperty(\"nodetypes\").isMultiple()) {\r\n        log.debug \"\
        Updating hippogallerypicker:imagelink nodetypes property template to multivalue\"\
        \r\n        String[] values = [ node.getProperty(\"nodetypes\").getString()\
        \ ]\r\n        node.getProperty(\"nodetypes\").remove()\r\n        node.setProperty(\"\
        nodetypes\", values)\r\n        return true;\r\n      }\r\n    }\r\n    else\
        \ {\r\n      log.debug \"Adding hippogallerypicker:imagelink nodetypes property\
        \ template (multivalue)\"\r\n      node.setProperty(\"nodetypes\", (String[])[]);\r\
        \n      return true;\r\n    }\r\n    return false\r\n  }\r\n\r\n  boolean\
        \ undoUpdate(Node node) {\r\n    throw new UnsupportedOperationException('Updater\
        \ does not implement undoUpdate method')\r\n  }\r\n\r\n}"
      hipposys:throttle: 1000
