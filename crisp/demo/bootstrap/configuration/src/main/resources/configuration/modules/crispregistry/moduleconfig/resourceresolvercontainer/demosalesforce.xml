<?xml version="1.0" encoding="UTF-8"?>
<sv:node sv:name="demoSalesForce" xmlns:sv="http://www.jcp.org/jcr/sv/1.0">
  <sv:property sv:name="jcr:primaryType" sv:type="Name">
    <sv:value>crisp:resourceresolver</sv:value>
  </sv:property>
  <sv:property sv:name="crisp:beandefinition" sv:type="String">
    <sv:value>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xd;
&lt;beans xmlns="http://www.springframework.org/schema/beans"&#xd;
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&#xd;
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.1.xsd"&gt;&#xd;
&#xd;
  &lt;bean parent="abstractCrispSimpleJacksonRestTemplateResourceResolver"&#xd;
        class="org.onehippo.cms7.crisp.core.resource.jackson.SimpleJacksonRestTemplateResourceResolver"&gt;&#xd;
    &lt;property name="baseUri" value="${salesforce.baseUrl}/services/data/v20.0" /&gt;&#xd;
    &lt;property name="restTemplate"&gt;&#xd;
      &lt;bean class="org.springframework.security.oauth2.client.OAuth2RestTemplate"&gt;&#xd;
        &lt;constructor-arg&gt;&#xd;
          &lt;bean class="org.springframework.security.oauth2.client.token.grant.password.ResourceOwnerPasswordResourceDetails"&gt;&#xd;
            &lt;property name="clientAuthenticationScheme" value="form" /&gt;&#xd;
            &lt;property name="accessTokenUri" value="${salesforce.baseUrl}/services/oauth2/token" /&gt;&#xd;
            &lt;property name="clientId" value="${salesforce.clientId}" /&gt;&#xd;
            &lt;property name="clientSecret" value="${salesforce.clientSecret}" /&gt;&#xd;
            &lt;property name="grantType" value="password" /&gt;&#xd;
            &lt;!-- NOTE: SalesForce doesn't support scope parameter!&#xd;
            &lt;property name="scope"&gt;&#xd;
              &lt;list&gt;&#xd;
                &lt;value&gt;read&lt;/value&gt;&#xd;
              &lt;/list&gt;&#xd;
            &lt;/property&gt;&#xd;
            --&gt;&#xd;
            &lt;property name="username" value="${salesforce.username}" /&gt;&#xd;
            &lt;property name="password" value="${salesforce.password}${salesforce.securityToken}" /&gt;&#xd;
          &lt;/bean&gt;&#xd;
        &lt;/constructor-arg&gt;&#xd;
        &lt;constructor-arg&gt;&#xd;
          &lt;bean class="org.springframework.security.oauth2.client.DefaultOAuth2ClientContext"&gt;&#xd;
            &lt;constructor-arg&gt;&#xd;
              &lt;bean class="org.springframework.security.oauth2.client.token.DefaultAccessTokenRequest"&gt;&#xd;
              &lt;/bean&gt;&#xd;
            &lt;/constructor-arg&gt;&#xd;
          &lt;/bean&gt;&#xd;
        &lt;/constructor-arg&gt;&#xd;
        &lt;property name="requestFactory" ref="org.springframework.http.client.ClientHttpRequestFactory" /&gt;&#xd;
      &lt;/bean&gt;&#xd;
    &lt;/property&gt;&#xd;
  &lt;/bean&gt;&#xd;
&#xd;
&lt;/beans&gt;</sv:value>
  </sv:property>
  <sv:property sv:multiple="true" sv:name="crisp:propnames" sv:type="String">
    <sv:value>salesforce.clientId</sv:value>
    <sv:value>salesforce.clientSecret</sv:value>
    <sv:value>salesforce.username</sv:value>
    <sv:value>salesforce.password</sv:value>
    <sv:value>salesforce.securityToken</sv:value>
    <sv:value>salesforce.baseUrl</sv:value>
  </sv:property>
  <sv:property sv:multiple="true" sv:name="crisp:propvalues" sv:type="String">
    <sv:value>someClientId</sv:value>
    <sv:value>someClientSecret</sv:value>
    <sv:value>john.doe@example.com</sv:value>
    <sv:value>somePassword</sv:value>
    <sv:value>someSecurityToken</sv:value>
    <sv:value>https://na1.salesforce.com</sv:value>
  </sv:property>
</sv:node>
